# Docker Compose for Local Argilla Setup
# =======================================
# Run: docker compose -f docker-compose.argilla.yml up -d
#
# Access: http://localhost:6900
# Default login: argilla / 12345678
# API Keys: owner.apikey, admin.apikey, or argilla.apikey
#
# After first start, create admin user:
#   docker exec -it argilla-server python -m argilla_server database users create_default

services:
  argilla:
    image: argilla/argilla-quickstart:latest
    container_name: argilla-server
    ports:
      - "6900:6900"
    environment:
      # Default user credentials (quickstart image)
      OWNER_USERNAME: owner
      OWNER_PASSWORD: "12345678"
      OWNER_API_KEY: owner.apikey
      ADMIN_USERNAME: admin
      ADMIN_PASSWORD: "12345678"
      ADMIN_API_KEY: admin.apikey
      ANNOTATOR_USERNAME: argilla
      ANNOTATOR_PASSWORD: "12345678"
      
      # Don't load sample datasets for faster startup
      LOAD_DATASETS: "none"
      
      # Auth secret (change in production!)
      ARGILLA_AUTH_SECRET_KEY: ${ARGILLA_AUTH_SECRET_KEY:-please-change-me-in-production}
      
    volumes:
      - argilla_data:/var/lib/argilla
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:6900/api/v1/status"]
      interval: 30s
      timeout: 10s
      retries: 5
    restart: unless-stopped

volumes:
  argilla_data:
    driver: local
