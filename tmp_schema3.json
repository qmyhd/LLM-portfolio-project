{
  "$defs": {
    "Action": {
      "description": "Trading action types.",
      "enum": [
        "buy",
        "sell",
        "trim",
        "add",
        "watch",
        "hold",
        "short",
        "hedge",
        "none"
      ],
      "title": "Action",
      "type": "string"
    },
    "Direction": {
      "description": "Sentiment/position direction.",
      "enum": [
        "bullish",
        "bearish",
        "neutral",
        "mixed"
      ],
      "title": "Direction",
      "type": "string"
    },
    "InstrumentType": {
      "description": "Asset class types.",
      "enum": [
        "equity",
        "option",
        "crypto",
        "index",
        "sector",
        "event_contract"
      ],
      "title": "InstrumentType",
      "type": "string"
    },
    "Level": {
      "description": "A price level extracted from the message.\n\nHandles various formats:\n- Exact: \"at 220\" \u2192 value=220\n- Range: \"low 600s\" \u2192 low=600, high=630, qualifier=\"low\"\n- Approximate: \"near 115\" \u2192 value=115, qualifier=\"near\"",
      "properties": {
        "kind": {
          "$ref": "#/$defs/LevelKind",
          "description": "Type of price level: entry, target, support, resistance, stop"
        },
        "value": {
          "default": null,
          "description": "Exact price value if specified",
          "title": "Value",
          "type": [
            "number",
            "null"
          ]
        },
        "low": {
          "default": null,
          "description": "Lower bound for range (e.g., 'low 600s' \u2192 600)",
          "title": "Low",
          "type": [
            "number",
            "null"
          ]
        },
        "high": {
          "default": null,
          "description": "Upper bound for range (e.g., 'low 600s' \u2192 630)",
          "title": "High",
          "type": [
            "number",
            "null"
          ]
        },
        "qualifier": {
          "default": null,
          "description": "Modifier like 'near', 'around', 'above', 'below', 'low', 'high'",
          "title": "Qualifier",
          "type": [
            "string",
            "null"
          ]
        }
      },
      "required": [
        "kind",
        "value",
        "low",
        "high",
        "qualifier"
      ],
      "title": "Level",
      "type": "object",
      "additionalProperties": false
    },
    "LevelKind": {
      "description": "Price level types.",
      "enum": [
        "entry",
        "target",
        "support",
        "resistance",
        "stop"
      ],
      "title": "LevelKind",
      "type": "string"
    },
    "OptionType": {
      "description": "Option contract type.",
      "enum": [
        "call",
        "put"
      ],
      "title": "OptionType",
      "type": "string"
    },
    "ParsedIdea": {
      "description": "A single semantic idea unit extracted from a trading message.\n\nEach idea should focus on ONE primary subject when possible.\nIf multiple stocks appear in one sentence, they can be in symbols[]\nbut primary_symbol should be the main focus.",
      "properties": {
        "idea_text": {
          "description": "The exact text segment for this idea (quote from message, max 500 chars)",
          "maxLength": 500,
          "title": "Idea Text",
          "type": "string"
        },
        "idea_summary": {
          "description": "Brief 1-2 sentence summary of this idea's key point (max 200 chars)",
          "maxLength": 200,
          "title": "Idea Summary",
          "type": "string"
        },
        "primary_symbol": {
          "default": null,
          "description": "Main ticker symbol this idea focuses on (e.g., 'AAPL'). Null for market/portfolio-wide ideas.",
          "title": "Primary Symbol",
          "type": [
            "string",
            "null"
          ]
        },
        "symbols": {
          "description": "All ticker symbols mentioned in this idea",
          "items": {
            "type": "string"
          },
          "title": "Symbols",
          "type": "array"
        },
        "instrument": {
          "$ref": "#/$defs/InstrumentType",
          "default": "equity",
          "description": "Asset type: equity, option, crypto, index, sector, event_contract"
        },
        "direction": {
          "$ref": "#/$defs/Direction",
          "default": "neutral",
          "description": "Sentiment direction: bullish, bearish, neutral, mixed"
        },
        "action": {
          "default": null,
          "description": "Intended trade action: buy, sell, trim, add, watch, hold, short, hedge",
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "buy",
            "sell",
            "trim",
            "add",
            "watch",
            "hold",
            "short",
            "hedge",
            "none",
            null
          ]
        },
        "time_horizon": {
          "$ref": "#/$defs/TimeHorizon",
          "default": "unknown",
          "description": "Trading timeframe: scalp, swing, long_term, unknown"
        },
        "trigger_condition": {
          "default": null,
          "description": "Condition for trade entry, e.g., 'if breaks 220', 'on pullback near 115'",
          "title": "Trigger Condition",
          "type": [
            "string",
            "null"
          ]
        },
        "levels": {
          "description": "Price levels: entry, target, support, resistance, stop",
          "items": {
            "$ref": "#/$defs/Level"
          },
          "title": "Levels",
          "type": "array"
        },
        "option_type": {
          "default": null,
          "description": "Option type if this is an options trade: call or put",
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "call",
            "put",
            null
          ]
        },
        "strike": {
          "default": null,
          "description": "Option strike price",
          "title": "Strike",
          "type": [
            "number",
            "null"
          ]
        },
        "expiry": {
          "default": null,
          "description": "Option expiry date in ISO format (YYYY-MM-DD)",
          "title": "Expiry",
          "type": [
            "string",
            "null"
          ]
        },
        "premium": {
          "default": null,
          "description": "Option premium/price paid",
          "title": "Premium",
          "type": [
            "number",
            "null"
          ]
        },
        "labels": {
          "description": "Multi-label classification from the 13-category taxonomy",
          "items": {
            "type": "string"
          },
          "title": "Labels",
          "type": "array"
        },
        "is_noise": {
          "default": false,
          "description": "Whether this content is noise/non-actionable",
          "title": "Is Noise",
          "type": "boolean"
        }
      },
      "required": [
        "idea_text",
        "idea_summary",
        "primary_symbol",
        "symbols",
        "instrument",
        "direction",
        "action",
        "time_horizon",
        "trigger_condition",
        "levels",
        "option_type",
        "strike",
        "expiry",
        "premium",
        "labels",
        "is_noise"
      ],
      "title": "ParsedIdea",
      "type": "object",
      "additionalProperties": false
    },
    "TimeHorizon": {
      "description": "Trading timeframe.",
      "enum": [
        "scalp",
        "swing",
        "long_term",
        "unknown"
      ],
      "title": "TimeHorizon",
      "type": "string"
    }
  },
  "description": "Complete parsing result for a Discord message.\n\nA message can contain multiple ideas[], each with its own\nsubject, labels, and extracted entities.",
  "properties": {
    "ideas": {
      "description": "List of semantic idea units extracted from the message",
      "items": {
        "$ref": "#/$defs/ParsedIdea"
      },
      "title": "Ideas",
      "type": "array"
    },
    "context_summary": {
      "description": "Overall summary of the entire message context (1-3 sentences)",
      "title": "Context Summary",
      "type": "string"
    },
    "confidence": {
      "description": "Overall confidence in the parsing quality (0.0-1.0)",
      "maximum": 1.0,
      "minimum": 0.0,
      "title": "Confidence",
      "type": "number"
    }
  },
  "required": [
    "ideas",
    "context_summary",
    "confidence"
  ],
  "title": "MessageParseResult",
  "type": "object",
  "additionalProperties": false
}
